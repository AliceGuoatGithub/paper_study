# 四旋翼无人机自主避障的研究---绪论

## 1.1 课题背景及研究意义

无人机[1]（UnmannedAerialVehicle，UAV），是指通过遥控控制或者是根据自身程序控制的非载人飞机。按照无人机的结构原理的不同，可以将无人机分为两大类：固定 翼无人机与旋翼式无人机[2]，旋翼无人机又可以进一步划分为单旋翼与多旋翼无人机， 如图 1.1。其中多旋翼飞行器结构简单、对人的操控技术要求低，深受消费者以及爱好 者欢迎[3]。

![1559689810937](C:\Users\郭元照\AppData\Roaming\Typora\typora-user-images\1559689810937.png)

四旋翼无人机组成简单，由一个机架与控制器就可以构成。在控制方面也较为简单，只需要控制四个旋翼的电机的转动速度，四个旋翼即可产生不同的推力，通过调节电机的转速就可以实现四旋翼的垂直起降、滚转、俯仰、偏航、悬停等各种姿态运动。同时，四旋翼可以在悬停的状态下瞬间变换四旋翼的姿态，切换运动状态，机动灵活且具有良 好的可操作性[4]。

随着小型无人机凭借灵活、轻便、价格低等优势迅速发展起来，相关应用技术也得到进一步的研究，研究人员在无人机控制等方面的研究不断取得巨大的成果，在军事救援侦查活动、民间使用等实际操作中，小型无人机强大的优势越来越得以体现[5]。随着嵌入式技术的迅速发展[6]，嵌入式芯片微小化且处理能力越来越强，无人机的自主导航吸引了研究人员的目光。其中，无论消费级还是军用级无人机，飞行过程中的躲避障碍物问题热门的研究课题，无人机能否成功躲避障碍物直接关系到无人机任务能否顺利完成，也同时关系着无人机本身的机身安全以及可能造成的人员伤害。随着无人机的发展，无人机的自主飞行控制及避障也成为一个衡量无人机智能化的标准。

近些年，计算机对于图像的处理技术得到迅速发展，将计算机图像视觉加入到无人机的导航系统成为无人机导航研究的新热点，基于图像信息的导航路径规划更为可靠， 且价格相对低廉，研究受众更为广泛[7]。机器视觉起初研究用于二维平面内活动的机器人，因为图像处理对于处理器硬件要求很高，尤其是研究初期，摄像头种类单一，图像处理更依赖于处理器运行处理算法，所以不太适用于无人机这种快速性比较强的机器，但是随着硬件的发展，图像处理速度得到了加强，图像视觉技术逐渐应用到了无人机导航领域，本课题研究的无人机的避障技术就是基于视觉检测障碍物，这是无人机视觉导航技术的一个重要组成部分。

 随着无人机数量增多，各种军用以及民用无人机的兴起，空中飞行区域因此拥挤[8]，我国颁布了相关无人机禁飞通令，限制民商用无人机飞行地域，无人机在飞行过程中安全问题需要得到更多的关注。多旋翼无人机在自主飞行过程中，同过硬件外设自主感知到障碍物信息，实时处理并发送指令到飞控系统，然后知道无人机作出反应，规避障碍物，其中的避障指令是无人机技术研究中的重点，同样也是难点，除此之外，无人机的自主避障很大程度上反应出飞行器的安全性以及其智能性，是无人机安全飞行以及完成制定任务的安全保障前提。综上，对四旋翼无人机自主避障技术的研究，具有实际意义。 

## 1.2 四旋翼无人机的发展和相关技术的研究现状

无人机的发展历史可以追溯到上世纪 20 年代，1917 年 Lawrence 和 Sperry 研制成 功了世界上第一架无人机，就此打开了无人机时代[9]。 随后 100 多年，研究人员在无人机的研究和设计上付出了很多，但是四旋翼无人机 并没有因此得到蓬勃的发展，四旋翼无人机的发展历史曲折而且漫长[10]。 在 20 世纪初期，世界上最早的四旋翼无人机 Breguet-Richet，即旋翼一号，由Breguet 兄弟和 Jacque 研制出来。因为当时技术水平的限制，该款无人机体积大且结构非常复杂， 而且因为当时的电子以及计算机技术的落后，“旋翼一号”中没有控制系统，导致无人机的操作性与飞行性不足，但是，这样的设计思想和方法毫无疑问给无人机的发展提供了一个前进的方向。 

在 1922 年，Dr.GeorgeDeBothezat 和 IvanJerome 研制出了“X”型结构的四旋翼无人机[11]。他们首次将控制系统加在了无人机上面，这是前所未有的。但是，由于结构复杂导致飞行问题以及成本问题，这个四旋翼无人机并没有达到想要的目标，但值得肯定的是，这款无人机的出现对于四旋翼的研究起到了巨大的推动作用。 

在 1956 年，ConvertaWings 等人经过大量资金的投入和努力，研制出了 “H”结构的四旋翼无人机[12]。该四旋翼是通过引擎产生动力，飞行能力得到了很大提升。但是，因为价值问题，无人机逐渐淡出人们的视线，随之发展也逐渐停滞。 20 世纪 90 年代，随着计算机、控制等技术的迅猛发展，研究人员在四旋翼无人机的研究上取得了很大的突破。四旋翼无人机的发展前景以及使用价值逐渐被人们关注，迅速的成为了人们研究的热点，近些年，随着无人机行业的快速发展，出现了包括电力巡检、无人机物流、植保检测等多行业的应用，应用过程中对无人机的避障要求也随之增加，关于无人机自主避障相关问题，国内外都进行了大量的理论研究和应用实验。

### 1.2.1 国外发展现状

国外研究机构针对四旋翼无人机的导航控制及避障等方面的研究的起步早于国内， 其中国外知名的研究无人机的机构主要有：麻省理工学院、宾夕法尼亚大学的 GRASP 实验室、日本千叶大学以及美国斯坦福大学的 STARMAC 项目等[13]。 

以下是国外几个著名的无人机公司及其产品。 

（1）Skydio 

Skydio 幕后的而开发团队包括来自于麻省理工学院以及谷歌 ProjectWing 的人员。 他们的项目由投资企业 AndreessenHorowitz 和 Accel 出资。 Skydio 无人机的机身后部装 备有几个具有识别功能的感应器，因此该无人机可以在人类跑步或骑车时紧跟人类。

![1559690180799](C:\Users\郭元照\AppData\Roaming\Typora\typora-user-images\1559690180799.png)

Skydio 借由英伟达 TX1 的优秀的运算能力和 MIT 在无人机视觉领域的深厚积累， 实现了首款全六向双目的量产无人机，产品图如图 1.2。这款无人机基于计算机视觉和人工智能深度学习实现场景的实时建模，在自动规划航线的时候有真实的 3D 场景模型参考。 

（2）Parrot（派诺特） 

在 2016 年美国拉斯维加斯国际无人机展览暨论坛会议（InterDrone）上，Parrot 宣布推出 ParrotS.L.A.Mdunk 开放式开发套件，以便为工作于多障碍及 GPS 信号受限环境中的无人机和其他机器人平台设计自主导航、避障、室内导航及 3D 绘图功能，如图 1.3。

![1559690261544](C:\Users\郭元照\AppData\Roaming\Typora\typora-user-images\1559690261544.png)

SLAM（SimultaneousLocalizationandMappingAlgorithm）[14]，指的是“同步定位和地图构建算法”。Parrot S.L.A.M.dunk 集成了基于 SLAM 技术的先进软件应用。SLAM 技术让无人机能够识别其周边环境并绘制 3D 地图，即使在受限于多障碍及 GPS 信号的环境中依然能够进行定位。 

ParrotS.L.A.M.dunk 内置英伟达 TK1 处理器，可以运行针对 GPU 优化的基于视觉的自主导航研究算法。此外，ParrotS.L.A.M.dunk 还通过进一步的优化，使其对无人机电池续航能力的影响降至最低[15]。 

（3）3DRobotics 

3DRobotics 是北美最大无人机厂商，推出了目前旋翼无人机普遍使用的飞控系统版 Pixhawk，Pixhawk 的前身是 APM，由于 APM 的处理器已经接近满负荷，没有办法实现更多的功能，所以硬件厂商采用了目前最新标准的 32 位 ARM 处理器，第一代产品是 PX4 系列，他分为飞控处理器 PX4FMU 和输入输出接口板 PX4IO，Pixhawk 控制板的推出，为无人机的研究与发展做出了巨大贡献。 

2016 年，美国国防部旗下负责研发用于军事用途的 DARPA（国防高级研究计划署）公布了FLA（高速轻型无人驾驶项目）的照片。FLA 搭载的就是 3DRobotics 公司的 pixhawk 飞控板。在第一次成功的飞行测试中，DARPA 控制无人机在预设的速度上自主飞行，同时测试了该无人机识别和感知障碍物的功能，这都得益于无人机装载的摄像头、 惯导、激光雷达和声纳等众多传感器。所有测试都在一个飞机库中进行，从图 1.4 中可 以看出，场地有些杂乱，对一般无人机来说属于复杂环境，而且随着测试的进行会变得更加复杂，一切都为了实现自动飞行。

![1559690461038](C:\Users\郭元照\AppData\Roaming\Typora\typora-user-images\1559690461038.png)

### 1.2.2 国内发展现状

国内对于无人机的研究起步相对国外晚一些，起步于 1950 年前后，但是由于无人机应用领域的增加，国内很多高校以及各大科研院所包括清华、南航、北航、上海交大、哈工大、自动化研究所等开始重视无人机技术的研究，目前国内高校及研究所主要偏重于控制理论及无人机应用的研究，关注点主要在机器视觉辅助下的导航技术以及基于激光雷达或者基于视觉技术的 SLAM 三维建图两个方面。国内比较好的无人机公司主要有以下几个： 

（1）大疆（DJI） 

目前消费级无人机市场，首推大疆公司[16]了，大疆公司主要是生产以及研发消费级 的多旋翼无人机，是全球领先的无人机研发和生产商，2015 年，大疆发布了一套名为 Guidance 的视觉传感导航系统，如图 1.5 所示，该系统用于实现无人机的视觉定位，并辅助完成自主避障。此系统装配了多组视觉-超声波组合的传感器，底部同过摄像头实现视觉定位，同时采用高精度立体视觉算法，感知四周障碍物，实时规划避障路径。 

同时大疆 18 年曝光新产品 Mavic Pro2，如图 1.6 所示，这款无人机具备全向的环境感知能力，在以往无人机的四向避障的基础上进行了升级改进，实现了无人机全方位感知避障功能。

![1559690595895](C:\Users\郭元照\AppData\Roaming\Typora\typora-user-images\1559690595895.png)（2）零度 

2016 年，零度智控公司发布了 Xplorer 2，相较于第一代无人机，Xplorer 2 在各方面都有了明显的改进。该款无人机将搭载自动避障系统，借助 TOF（TimeofFlight）系统实现飞行过程中的自主避障，是全球首个搭载此类技术的消费级无人机。避障模块是通过检测传感器 360 度扫描检测障碍物信息，雷达式扫描技术与零度专业飞控结合，可以在 6 米有效避障距离内以每秒 50 次的速率实现 360 度的全方位扫描。如图 1.7 所示。

![1559690654162](C:\Users\郭元照\AppData\Roaming\Typora\typora-user-images\1559690654162.png)

### 1.2.3 无人机避障技术研究现状

目前多旋翼无人机的障碍物检测方法主要分为四种：超声波检测、激光雷达检测、 单双目视觉检测以及多传感器融合检测[17]。

避障系统最重要的部分是避障路径的生成，也是避障研究方面主要的研究内容，避障算法的的优劣直接影响到避障的成功与失败。在更早之前，机器人行业蓬勃发展，学者在对机器人移动过程中涉及到的避障问题提出多种解决方法，目前已有多种机器人避障算法逐渐应用于无人机避障系统，但是由于两者之前具有不同的特性，算法还需要针对无人机特点进行改进。

土耳其的学者 AydinEresen 等人提出了一种避障算法，该算法对街头的障碍物进行了识别和检测，并实施规划出可行路径[18]。亚利桑那州立大学的 Lin 等人在 RRT 算法基础上进行改进，相别与最初的 RRT算法，他们采用 Dubins 曲线连接实现无人机的实 时路径规划。美国学者Ferrick,A.等人提出了一种基于 OpenCV 技术的简化算法，通过激光雷达构建经过简化的空间网格地图，地图中包含墙壁以及其他障碍物的位置信息 [19]。

同时国内也有很多研究学者在无人机避障算法做出贡献，北京航空航天大学大学的梁晓等人采用自回归方法预测障碍物的运动，通过滚动 APF 算法进行动态环境中无人机的在线路径规划[20]。基于图像视觉技术的避障算法[21]在国内是研究的热点，比如北京航空航天大学基于双目相机的视差测距技术对无人机的避障算法进行研究实验，还有好多使用深度相机或者单目相机技术实现避障算法研究与实验。同时还有很多研究人员利用光流技术研究避障算法，近年来基于光流的避障算法有很多种，包括金字塔光流算法、 平移光流算法、Horn-Schunck 光流算法等[22]。 综上所述，避障算法种类已经有很多，但是应用到无人机时还需要以具体对象和环境为基础进行选择，所以，对于具体的无人机进行研究时，需要对飞行器建模，并综合考虑飞机的整体性能，选取最优避障算法，最后通过控制手段，实现无人机的自主避障。 

## 1.3 论文的研究内容和结构

本文针对无人机的自主避障技术研究，在研究背景以及避障算法现状基础上，确立本文主要工作内容：图像采集障碍物信息、无人机软硬件环境搭建以及避障算法选择与改进研究以及四旋翼无人机建模仿真实验。图像采集方面，通过视觉传感器，对无人机飞行路径上的障碍物检测并获取相关信息，为实现算法提供好的数据。软硬件平台搭建方面，主要选取合适硬件配置，搭建无人机飞行器，并为飞控开发进行环境配置。最后为了实现具体无人机实际飞行中避障飞行，通过实际飞行验证算法可行性，并仿真对比几种算法优劣。本文具体章节内容安排如下： 

第 1 章，绪论，介绍了课题研究的相关背景，避障算法在无人机实际使用过程中的重要性，然后介绍目前国内外相关的研究现状，罗列了目前市面上比较优秀的无人机避障产品以及其性能，最后介绍相关避障算法研究进展。

第 2 章，无人机动力学建模，本章完成了一些准备工作，介绍无人机的基本结构及其飞行工作原理；分析四旋翼无人机的飞行原理，利用动力学知识，对四旋翼无人机进行动力学建模。

第 3 章，无人机避障系统整体设计，分析避障系统整体流程，将具体工作内容细分， 对工作需求进行分析规划，描述了视觉测距技术的使用过程，最后介绍详细的硬件选型以及无人机飞行器的搭建和开发环境的配置。 

第 4 章，避障算法研究，对比研究了 A算法与人工虚拟势场算法避障，兼顾全局路径规划与局部路径规划两种方式，分析了 A*算法与传统人工势场算法各自的优缺点， 并就人工势场算法存在的部分缺陷问题，研究产生的原因，提出解决方法。 

第 5 章，研究无人机实际飞行中的定高控制与姿态控制，利用互补滤波融合多传感器数据进行无人机实际高度与姿态解算，然后借助 PID 控制算法设计串级 PID 高度控制器与串级 PID 姿态控制器。 

第 6 章，实验验证及结果分析，首先控制无人机定高飞行，仿真测试控制算法的有效性，然后将避障算法仿真，编程实现避障算法中提出的改进方法，通过仿真观察所提出方法的可行性，最后通过编程实际应用到无人机飞行器中，进行实验验证算法可行性。 

第 7 章，总结本文所做工作，思考研究过程中自身存在的问题，并对以后的工作的 展望，讨论后续相关技术的研究方向。